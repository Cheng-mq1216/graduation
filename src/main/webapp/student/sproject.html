<!doctype html>
<html>

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>学生界面</title>
<meta name="description" content="这是学生主页">
<meta name="keywords" content="index">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<link rel="icon" type="image/png" href="../img/lysf.ico">
<link rel="stylesheet" href="../amazeui/css/amazeui.min.css" />
<link rel="stylesheet" href="css/admin.css">
<link rel="stylesheet" href="css/app.css">
</head>

<body style="margin-left: 10px;overflow:hidden;" >

	<div id="ref_page" class="am-g">
	
			<div class="tpl-content-page-title" style="margin-bottom: 10px;">
				课题列表</div>
			<ol class="am-breadcrumb">
				<li><a href="schoose.html" class="am-icon-users">教师</a></li>
				<li class="am-active">课题</li>
			</ol>
		
			<div class="am-u-sm-12 am-panel am-panel-default am-scrollable-horizontal">
	          <form class="am-form" style="margin-top: 30px;">
	            <table class="am-table am-table-striped am-table-hover table-main am-text-nowrap">
	              <thead>
	              <tr>
	                <th>课题名</th><th>课题描述</th><th>课题来源</th><th>教师姓名</th><th>操作</th>
	              </tr>
	              </thead>
	              <tbody>
	              </tbody>
	            </table>
	          </form>
	        </div>
				  
	</div>

<script src="../js/jquery.min.js"></script>
<script src="../amazeui/js/amazeui.min.js"></script>
<script type="text/javascript">
		$(function() {
			
			//正则获得url参数
			function getQueryString(name) { 
				var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
				var r = window.location.search.substr(1).match(reg); 
				if (r != null) return unescape(r[2]); return null; 
			} 
			var teacherId=getQueryString("teacherId");
			$.get('/graduation/projectController/getProjectListByTeacherId',{
				teacherId:teacherId,
				pageNum:1,
				pageSize:8
			},function(data){

				for(var i=0;i<data.list.length;i++){
					var tr=$('<tr>').append($('<td>').append($('<a>').attr('href','javascript:;').text(data.list[i].projectName)));
	              	tr.append($('<td>').text(data.list[i].projectDescribe));
	              	tr.append($('<td>').text(data.list[i].projectFrom.projectFromName));
	              	tr.append($('<td>').text(data.list[i].teacher.user.userName));
	              	var button=$('<button>').attr('type','button')
	              				.addClass('am-btn am-btn-primary am-btn-sm project_button')
	              				.append($('<span>').addClass('am-icon-plus').append(' 选择'))
	              	
	              				
	              				
	                //点击选择按钮,出现头像
					$('.project_button').on('click',function() {
						
						var parent=$(this).parent('td').last();
						parent.empty();
						parent.append($('<img>').attr('src','../img/user01.png').attr('title','李展').addClass('project_choose_img'));
						
						//去写数据库
						
						
						//不允许再点击其他课题
						del_projectBtn();
					});
	              				
	              	var td=$('<td>').append(button);
	              	tr.append(td);
	              	$('tbody').append(tr);
              }
				
			});
			
			//student_project();
			//查询数据库该学生是否已经选课
			function student_project(){
				if(true){
					del_projectBtn();
				}
			}
			
			function del_projectBtn(){
				$('.project_button').each(function() {
					$(this).parent().empty();
				});
			}
			
			

		});
</script>
</body>

</html>